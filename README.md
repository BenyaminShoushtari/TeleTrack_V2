๐ก Mazaneh Monitor โ Real-Time Telegram Price Stream
ฺฉ ูุงูุชูุฑ ูุฏุฑุชููุฏ ู ุจูุงุฏุฑูฺฏ ุจุฑุง ฺฉุงูุงูโูุง ุชูฺฏุฑุงู ฺฉู ุฏุงุฏูโูุง ููุช ุฑุง ุงุณุชุฎุฑุงุฌ ูโฺฉูุฏุ ุฏุฑ SQLite ุฐุฎุฑู ูโููุงุฏ (ุจุง ุฒูุงูโูุง ููุงุฏ ู ุดูุณ) ู ุจุฑูุฒุฑุณุงูโูุง ุฑุง ุงุฒ ุทุฑู WebSocket ูพุฎุด ูโฺฉูุฏ.

โจ ูฺฺฏโูุง
๐ฅ ูุธุงุฑุช ุจูุงุฏุฑูฺฏ ูพุงูโูุง ุชูฺฏุฑุงู
ุงุชุตุงู ูุณุชูู ุจู API ุชูฺฏุฑุงู

ูพุฑุฏุงุฒุด ูพุงูโูุง ุฌุฏุฏ ุฏุฑ ูุญุธู ุฏุฑุงูุช

๐ง ุงุณุชุฎุฑุงุฌ ููุดููุฏ ููุช ุงุฒ ูุชู ูุงุฑุณ
ุดูุงุณุง ุงูฺฏููุง ููุช ุฏุฑ ูุชูโูุง ูุงุฑุณ

ูพุฑุฏุงุฒุด ุงุนุฏุงุฏ ุจู ูุฑูุช ุงุณุชุงูุฏุงุฑุฏ

๐ ุฐุฎุฑูโุณุงุฒ SQLite
Gregorian timestamp: ุฒูุงู ููุงุฏ

Shamsi timestamp: ุฒูุงู ุดูุณ

ุณุงุฎุชุงุฑ ูพุงฺฏุงู ุฏุงุฏู ุจูููโุดุฏู

๐ ูุฏุฑุช ุฎูุฏฺฉุงุฑ ุญุฌู ูพุงฺฏุงู ุฏุงุฏู
ูุญุฏูุฏุช ุญุฌู: ตฐฐ ูฺฏุงุจุงุช

ุญุฐู ุฎูุฏฺฉุงุฑ ูุฏูโุชุฑู ฒฐูช ุฑฺฉูุฑุฏูุง ุฏุฑ ุตูุฑุช ูุฒูู

๐ ูพุฎุด ุจูุงุฏุฑูฺฏ ุงุฒ ุทุฑู WebSocket
ุงุฑุชุจุงุท ุฏูุทุฑูู ุจุง ฺฉูุงูุชโูุง

ุงุฑุณุงู ุจุฑูุฒุฑุณุงูโูุง ุฏุฑ ูุญุธู

๐ ูุนูุงุฑ ุขูุงุฏูโ ุชููุฏ
ุทุฑุงุญ ุบุฑููุฒูุงู (Async)

ูุฏุฑุช ุฎุทุง ู ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ ุฎูุฏฺฉุงุฑ

๐งพ ุณุณุชู ูุงฺฏโฺฏุฑ ุฌุงูุน
ุณุทุญโูุง ูุฎุชูู ูุงฺฏ (INFO, DEBUG, ERROR)

ุฐุฎุฑูโุณุงุฒ ุฏุฑ ูุงู ู ููุงุด ุฏุฑ ุชุฑููุงู

๐ฆ ูุงุฒููุฏโูุง
Python 3.9+

ุณุฑูุฑ ูููฺฉุณ (ุชูุตู ูโุดูุฏ)

ุงุนุชุจุงุฑูุงููโูุง API ุชูฺฏุฑุงู

๐ ุฑุงูููุง ูุตุจ
ฑ๏ธโฃ ฺฉููู ฺฉุฑุฏู ูุฎุฒู
bash
git clone https://github.com/YOUR_USERNAME/mazaneh-monitor.git
cd mazaneh-monitor
ฒ๏ธโฃ ุงุฌุงุฏ ูุญุท ูุฌุงุฒ ูพุงุชูู
ุงุฌุงุฏ ูุญุท ูุฌุงุฒ:

bash
python3 -m venv venv
ูุนุงูโุณุงุฒ ูุญุท ูุฌุงุฒ:

ูููฺฉุณ / ุณุฑูุฑ:

bash
source venv/bin/activate
ุงฺฏุฑ ุจุง ููููุช ูุนุงู ุดูุฏุ ุจุงุฏ ุนุจุงุฑุช (venv) ุฑุง ุฏุฑ ุงุจุชุฏุง ุฎุท ูุฑูุงู ุจุจูุฏ.

ณ๏ธโฃ ูุตุจ ูุงุจุณุชฺฏโูุง
bash
pip install --upgrade pip
pip install telethon websockets python-dotenv aiosqlite jdatetime
โ๏ธ ูพฺฉุฑุจูุฏ
ูุงู .env ุฑุง ุงุฌุงุฏ ฺฉูุฏ:

env
# Telegram API Credentials
TELEGRAM_API_ID=YOUR_API_ID
TELEGRAM_API_HASH=YOUR_API_HASH

# Telegram Channel Configuration
TELEGRAM_CHANNEL=channel_username
SESSION_NAME=mazaneh_session

# WebSocket Configuration
WS_HOST=0.0.0.0
WS_PORT=8765

# Logging
LOG_LEVEL=INFO
โถ๏ธ ุงุฌุฑุง ูพุฑูฺู
bash
python telegramscrap.py
ุฏุฑ ุตูุฑุช ููููุชุ ุฎุฑูุฌ ุฒุฑ ุฑุง ูุดุงูุฏู ุฎูุงูุฏ ฺฉุฑุฏ:

text
โ Telegram Connected
๐ WS running โ ws://0.0.0.0:8765
๐ ูุงูโูุง ุชููุฏุดุฏู
mazaneh.db - ูพุงฺฏุงู ุฏุงุฏู SQLite

mazaneh_monitor.log - ูุงู ูุงฺฏ

๐ ุงุชุตุงู WebSocket
ฺฉูุงูุชโูุง ูโุชูุงููุฏ ุจู ุขุฏุฑุณ ุฒุฑ ูุชุตู ุดููุฏ:

text
ws://SERVER_IP:8765
๐ ุฑูุชุงุฑ ูพุงฺฏุงู ุฏุงุฏู
ูุญุฏูุฏุช ุญุฌู
ุญุฏุงฺฉุซุฑ ุญุฌู ูพุงฺฏุงู ุฏุงุฏู: ตฐฐ ูฺฏุงุจุงุช

ุฏุฑ ุตูุฑุช ูุฑุงุชุฑ ุฑูุชูุ ูุฏูโุชุฑู ฒฐูช ุฑฺฉูุฑุฏูุง ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุญุฐู ูโุดููุฏ

ุฏุงุฏูโูุง ุฐุฎุฑูโุดุฏู
ููุฏ	ุชูุถุญ
price	ููุช ุงุณุชุฎุฑุงุฌโุดุฏู
created_at_gregorian	ุฒูุงู ููุงุฏ (ูุฑูุช ISO)
created_at_shamsi	ุฒูุงู ุดูุณ
๐งช ุชุณุช ูพุงฺฏุงู ุฏุงุฏู
bash
sqlite3 mazaneh.db
ููููู ฺฉูุฆุฑโูุง:

sql
-- ููุงุด ฑฐ ุฑฺฉูุฑุฏ ุงูู
SELECT * FROM mazaneh_prices LIMIT 10;

-- ูุญุงุณุจู ูุงูฺฏู ููุช
SELECT AVG(price) FROM mazaneh_prices;

-- ููุงุด ุชุนุฏุงุฏ ุฑฺฉูุฑุฏูุง
SELECT COUNT(*) FROM mazaneh_prices;
๐ง ุงุฌุฑุง ุจู ุนููุงู ุณุฑูุณ ูููฺฉุณ (systemd)
ฑ๏ธโฃ ุงุฌุงุฏ ูุงู ุณุฑูุณ
bash
sudo nano /etc/systemd/system/mazaneh.service
ฒ๏ธโฃ ูุฑุงุฑุฏุงุฏู ฺฉุงููฺฏ ุณุฑูุณ
โ๏ธ ูุณุฑูุง ุฑุง ุจุง ูุณุฑ ุณุฑูุฑ ุฎูุฏ ุฌุงฺฏุฒู ฺฉูุฏ

ini
[Unit]
Description=Mazaneh Monitor Service
After=network.target

[Service]
User=root
WorkingDirectory=/root/mazaneh
ExecStart=/root/mazaneh/venv/bin/python telegramscrap.py
Restart=always

[Install]
WantedBy=multi-user.target
ณ๏ธโฃ ุจุงุฑฺฏุฐุงุฑ ูุฌุฏุฏ systemd
bash
sudo systemctl daemon-reload
ด๏ธโฃ ูุนุงูโุณุงุฒ ุงุฌุฑุง ุฎูุฏฺฉุงุฑ
bash
sudo systemctl enable mazaneh
ต๏ธโฃ ุดุฑูุน ุณุฑูุณ
bash
sudo systemctl start mazaneh
ถ๏ธโฃ ุจุฑุฑุณ ูุถุนุช
bash
sudo systemctl status mazaneh
ท๏ธโฃ ูุดุงูุฏู ูุงฺฏโูุง
bash
journalctl -u mazaneh -f
๐ ุชููู ุณุฑูุณ
bash
sudo systemctl stop mazaneh
๐ ุฑุงูโุงูุฏุงุฒ ูุฌุฏุฏ ุณุฑูุณ
bash
sudo systemctl restart mazaneh
๐งฏ ุนุจโุงุจ
ูุญุท ูุฌุงุฒ ูุนุงู ููโุดูุฏ
bash
apt install python3-full python3-venv
ูพูุฑุช ูุงุจู ุฏุณุชุฑุณ ูุณุช
bash
ufw allow 8765/tcp
ูุดฺฉู ุฏุฑ ูุฑูุฏ ุชูฺฏุฑุงู
ูุงู ุณุดู ุฑุง ุญุฐู ฺฉุฑุฏู ู ุฏูุจุงุฑู ุฑุงูโุงูุฏุงุฒ ฺฉูุฏ.

๐ ูฺฉุงุช ุงููุช
โ ูุฑฺฏุฒ ูุงู .env ุฑุง commit ูฺฉูุฏ

โ ูุฑฺฏุฒ API HASH ุฑุง ุจู ุงุดุชุฑุงฺฉ ูฺฏุฐุงุฑุฏ

๐ ุงุฒ ูุงุฑูุงู ุจุฑุง ูุญุงูุธุช ุงุฒ ูพูุฑุช WebSocket ุงุณุชูุงุฏู ฺฉูุฏ

๐ ฺฉูุฏูุง API ุฑุง ุฏุฑ ูุญุทโูุง ุงูู ูฺฏูุฏุงุฑ ฺฉูุฏ

๐ ููุดู ุฑุงู ุขูุฏู
ูฺฺฏ	ูุถุนุช
REST API	๐ก ุจุฑูุงููโุฑุฒ ุดุฏู
ุฏุงุดุจูุฑุฏ ูุจ	๐ก ุจุฑูุงููโุฑุฒ ุดุฏู
ูููุฏุงุฑูุง ุชุนุงูู	๐ก ุจุฑูุงููโุฑุฒ ุดุฏู
ูพุดุชุจุงู ฺูุฏ ฺฉุงูุงูู	๐ข ุฏุฑ ูุณุฎู ูุนู
ุณุณุชู ูพุดุชุจุงูโฺฏุฑ	๐ก ุจุฑูุงููโุฑุฒ ุดุฏู
ููุชูุฑ ูุดุฏุงุฑ	๐ก ุจุฑูุงููโุฑุฒ ุดุฏู
๐ ูพุดุชุจุงู: ุจุฑุง ฺฏุฒุงุฑุด ูุดฺฉูุงุช ุง ูพุดููุงุฏุงุชุ ูุทูุงู Issue ุฌุฏุฏ ุฏุฑ GitHub ุงุฌุงุฏ ฺฉูุฏ.

โญ ุงฺฏุฑ ุงู ูพุฑูฺู ุจุฑุง ุดูุง ููุฏ ุจูุฏุ ูุทูุงู ุณุชุงุฑู ุจุฏุฏ!

